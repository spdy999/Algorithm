---
Project: Leetcode
Progress: true
Created: 2025-09-20
Updated: 2025-09-26
Difficulty: Medium
Time: O(n log n), O(n)
Space:
  - O(n)
  - O(1)
Topics:
Techniques:
  - "[[Heap#Max heap]]"
Related problems:
Code:
  - "[[678.valid-parenthesis-string_math.py]]"
  - "[[678.valid-parenthesis-string_stack.py]]"
Sites:
  - https://leetcode.com/problems/valid-parenthesis-string/description
Walkthrough:
  - https://neetcode.io/solutions/valid-parenthesis-string
Companies:
Note:
  - I can do by myself
  - stack is easy but math is smart
tags:
TODO:
  - Check neet
---
# 678. Valid Parenthesis String
---
Given a string `s` containing only three types of characters: `'('`, `')'` and `'*'`, return `true` _if_ `s` _is **valid**_.

The following rules define a **valid** string:

- Any left parenthesis `'('` must have a corresponding right parenthesis `')'`.
- Any right parenthesis `')'` must have a corresponding left parenthesis `'('`.
- Left parenthesis `'('` must go before the corresponding right parenthesis `')'`.
- `'*'` could be treated as a single right parenthesis `')'` or a single left parenthesis `'('` or an empty string `""`.

**Example 1:**

**Input:** s = "()"
**Output:** true

**Example 2:**

**Input:** s = "(*)"
**Output:** true

**Example 3:**

**Input:** s = "(*))"
**Output:** true

**Constraints:**

- `1 <= s.length <= 100`
- `s[i]` is `'('`, `')'` or `'*'`.

----

## Solve

### 1. Using [[Stack]]
Time: `O(n)`
Space: `O(n)`
![[678. Valid Parenthesis String 2025-09-26 16.16.51.excalidraw]]
### 3. Using [[1-pass loop]] + Math
Time: `O(n)`
Space: `O(1)`

`(*`  =>    => minL = 0 => True
`*(*` => `*` => minL = 0 => True

`*(`  => `(` => minL = 1 => False

`)*`  => `)` => maxL = -1 => False
